{"id":"voelgoedevents-0xu","title":"Normalize actor shape to canonical 6-field actor across policies \u0026 calls","description":"Why:\nPhase 3 resources/policies must follow canonical actor shape (6 fields, user_id not id). Current codebase still uses actor(:id) and partial actors, which will cause inconsistent authorization and brittle tests.\n\nWhat:\n- Replace policy references actor(:id) -\u003e actor(:user_id)\n- Remove/replace partial/system actors with full 6-field actor map\n- Ensure actor is passed to final Ash create/update/read/destroy calls\n- Update fixtures/helpers/tests to build full actor consistently\n\nProof:\nmix format \u0026\u0026 mix compile \u0026\u0026 mix test","status":"in_progress","priority":0,"issue_type":"bug","created_at":"2025-12-16T10:11:33.232970186+02:00","updated_at":"2025-12-16T10:17:00.500055748+02:00","labels":["ash-3","blocking","rbac"],"dependencies":[{"issue_id":"voelgoedevents-0xu","depends_on_id":"voelgoedevents-m4e","type":"discovered-from","created_at":"2025-12-16T10:12:29.619475585+02:00","created_by":"daemon"},{"issue_id":"voelgoedevents-0xu","depends_on_id":"voelgoedevents-c1q","type":"discovered-from","created_at":"2025-12-16T19:13:31.190867536+02:00","created_by":"daemon"}]}
{"id":"voelgoedevents-33g","title":"Fix auth login rate limit regression tests","description":"Progress (2025-12-16):\n- SetRateLimitContext now correctly matches POST /auth/user/password/sign_in for :login (no longer /auth/log_in).\n- Regression test runs but fails with BadMapError:\n  rate_limit_overrides in test config is a keyword list, but plug expects a map (Map.get/3).\nNext:\n- Make SetRateLimitContext.limit/1 accept keyword list or map (normalize_overrides/1), OR change test config to map.\n- Ensure regression test sets conn.remote_ip (limiter uses remote_ip, not x-forwarded-for).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T07:38:53.475697877+02:00","updated_at":"2025-12-16T09:47:30.366709581+02:00","closed_at":"2025-12-16T09:47:30.366709581+02:00","close_reason":"Regression test fixed; limiter keys corrected and overrides normalized","labels":["auth","rate-limit","test"]}
{"id":"voelgoedevents-c1q","title":"Phase 3 Readiness Gate: Ash 3.x Tenant + Policies + Audit Stabilization","description":"PURPOSE\nStabilize Ash 3.x tenant filtering, policy strict-check compliance, and AuditChange so Phase 3 work stops thrashing.\n\nDEFINITION OF DONE\n- mix compile clean\n- Focused suites pass:\n  - mix test test/voelgoedevents/ash/preparations/filter_by_tenant_test.exs --seed 0\n  - mix test test/voelgoedevents/ash/changes/audit_change_test.exs --seed 0\n- Repo sanity sweeps are zero:\n  - rg \"\\bfact\\(\" -n lib\n  - rg \"expr\\([^\\)]*resource\\.\" -n lib/voelgoedevents/ash\n\nRULES\n- One child issue per single-focus change\n- One file touched per child issue\n- Run the exact test command for that child before closing","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-16T19:12:27.020809145+02:00","updated_at":"2025-12-16T19:13:21.9045002+02:00","labels":["ash3","phase3","stabilization"]}
{"id":"voelgoedevents-g05","title":"FilterByTenant tests: match Ash 3 predicate shape (Eq left/right)","description":"SCOPE (ONE FILE ONLY)\n- test/voelgoedevents/ash/preparations/filter_by_tenant_test.exs\n\nPROBLEM\nAssertions expect %Ash.Query.Operator.Eq with left: :organization_id and right: ^org_id.\nActual is left: organization_id (no colon) and right: \"uuid\" literal, with internal predicate fields.\n\nCHANGE\nUpdate assertions to match the actual Ash 3 predicate shape, while keeping test intent identical:\n- org filter is an Eq predicate on organization_id\n- right side equals the expected org_id string\n\nVERIFY\nmix test test/voelgoedevents/ash/preparations/filter_by_tenant_test.exs --seed 0","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-16T19:15:59.019199721+02:00","updated_at":"2025-12-16T19:17:28.576795931+02:00","labels":["ash3","tenant","tests"],"dependencies":[{"issue_id":"voelgoedevents-g05","depends_on_id":"voelgoedevents-c1q","type":"discovered-from","created_at":"2025-12-16T19:17:23.436605332+02:00","created_by":"daemon"}]}
{"id":"voelgoedevents-m4e","title":"Phase 3 start: normalize actor shape + implement Venue (with migration + tests)","description":"","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-16T10:10:21.594397099+02:00","updated_at":"2025-12-16T10:11:24.080672156+02:00","labels":["ash-3","phase-3","rbac","venues"],"dependencies":[{"issue_id":"voelgoedevents-m4e","depends_on_id":"voelgoedevents-c1q","type":"discovered-from","created_at":"2025-12-16T19:13:31.23834465+02:00","created_by":"daemon"}]}
{"id":"voelgoedevents-uij","title":"Phase 3.1.1 Venue: migration + resource + policies + tests","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T10:11:33.281014137+02:00","updated_at":"2025-12-16T10:11:33.281014137+02:00","labels":["phase-3","venues"],"dependencies":[{"issue_id":"voelgoedevents-uij","depends_on_id":"voelgoedevents-m4e","type":"discovered-from","created_at":"2025-12-16T10:12:29.665074954+02:00","created_by":"daemon"},{"issue_id":"voelgoedevents-uij","depends_on_id":"voelgoedevents-c1q","type":"discovered-from","created_at":"2025-12-16T19:13:31.282905596+02:00","created_by":"daemon"}]}
